<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>docker基础 | Heartape</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="favicon.ico">
    <script src="/assets/js/bodyClick.js"></script>
    <meta name="description" content="你也想起舞吗">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.1838edc9.css" as="style"><link rel="preload" href="/assets/js/app.3772d366.js" as="script"><link rel="preload" href="/assets/js/3.a756679f.js" as="script"><link rel="preload" href="/assets/js/1.9aef9ca4.js" as="script"><link rel="preload" href="/assets/js/60.a04cb69a.js" as="script"><link rel="prefetch" href="/assets/js/10.89453704.js"><link rel="prefetch" href="/assets/js/11.b7d19dcc.js"><link rel="prefetch" href="/assets/js/12.3586839b.js"><link rel="prefetch" href="/assets/js/13.2a25cc2b.js"><link rel="prefetch" href="/assets/js/14.30bc9c52.js"><link rel="prefetch" href="/assets/js/15.c5e2e1d7.js"><link rel="prefetch" href="/assets/js/16.ca79a86e.js"><link rel="prefetch" href="/assets/js/17.e79f3488.js"><link rel="prefetch" href="/assets/js/18.354f2cae.js"><link rel="prefetch" href="/assets/js/19.e8e8dee3.js"><link rel="prefetch" href="/assets/js/20.5776fc30.js"><link rel="prefetch" href="/assets/js/21.97de2721.js"><link rel="prefetch" href="/assets/js/22.5afd98d0.js"><link rel="prefetch" href="/assets/js/23.e694ee88.js"><link rel="prefetch" href="/assets/js/24.ed04a980.js"><link rel="prefetch" href="/assets/js/25.9424f5de.js"><link rel="prefetch" href="/assets/js/26.af551e6a.js"><link rel="prefetch" href="/assets/js/27.3cb660c6.js"><link rel="prefetch" href="/assets/js/28.6f3dec60.js"><link rel="prefetch" href="/assets/js/29.df48b46a.js"><link rel="prefetch" href="/assets/js/30.ed1b85b0.js"><link rel="prefetch" href="/assets/js/31.2dd88157.js"><link rel="prefetch" href="/assets/js/32.b31d045a.js"><link rel="prefetch" href="/assets/js/33.48961a72.js"><link rel="prefetch" href="/assets/js/34.09b0bbe4.js"><link rel="prefetch" href="/assets/js/35.c9b064fb.js"><link rel="prefetch" href="/assets/js/36.02b7db08.js"><link rel="prefetch" href="/assets/js/37.8f15127f.js"><link rel="prefetch" href="/assets/js/38.6f895674.js"><link rel="prefetch" href="/assets/js/39.edc338cb.js"><link rel="prefetch" href="/assets/js/4.2a60d206.js"><link rel="prefetch" href="/assets/js/40.18d939be.js"><link rel="prefetch" href="/assets/js/41.d9ddd50d.js"><link rel="prefetch" href="/assets/js/42.e65e0965.js"><link rel="prefetch" href="/assets/js/43.ab547dcb.js"><link rel="prefetch" href="/assets/js/44.7f4d1e87.js"><link rel="prefetch" href="/assets/js/45.e0016224.js"><link rel="prefetch" href="/assets/js/46.6a732805.js"><link rel="prefetch" href="/assets/js/47.a3e56c55.js"><link rel="prefetch" href="/assets/js/48.17beed8f.js"><link rel="prefetch" href="/assets/js/49.a2811539.js"><link rel="prefetch" href="/assets/js/5.e932c235.js"><link rel="prefetch" href="/assets/js/50.7bea9820.js"><link rel="prefetch" href="/assets/js/51.a08a3c61.js"><link rel="prefetch" href="/assets/js/52.790f9e3c.js"><link rel="prefetch" href="/assets/js/53.967faf9e.js"><link rel="prefetch" href="/assets/js/54.d953d231.js"><link rel="prefetch" href="/assets/js/55.f43c118f.js"><link rel="prefetch" href="/assets/js/56.08b2834e.js"><link rel="prefetch" href="/assets/js/57.1f30a616.js"><link rel="prefetch" href="/assets/js/58.0a83ca6a.js"><link rel="prefetch" href="/assets/js/59.26dffdf0.js"><link rel="prefetch" href="/assets/js/6.8b07e98c.js"><link rel="prefetch" href="/assets/js/61.b139b784.js"><link rel="prefetch" href="/assets/js/62.2752b974.js"><link rel="prefetch" href="/assets/js/63.31456095.js"><link rel="prefetch" href="/assets/js/7.8aba8e83.js"><link rel="prefetch" href="/assets/js/8.454dec07.js"><link rel="prefetch" href="/assets/js/9.e02e61b1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1838edc9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>Heartape</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Heartape</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/image/hero.png" alt="Heartape" class="logo"> <span class="site-name">Heartape</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/docs/java/java8.html" class="nav-link"><i class="iconfont undefined"></i>
  JAVA
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/frame/spring5.html" class="nav-link"><i class="iconfont undefined"></i>
  框架
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/source/springSource.html" class="nav-link"><i class="iconfont undefined"></i>
  源码
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/middleware/mysql.html" class="nav-link"><i class="iconfont undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/tool/git.html" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时光走过了哪里
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      我在哪里
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/heartape" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/heartape" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/247318527" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  Bilibili
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="mailto:heartape@163.com" class="nav-link external"><i class="iconfont reco-mail"></i>
  163
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><img src="/assets/image/hero.png" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    Heartape
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>26</h3> <h6 data-v-ca798c94>文章</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>27</h3> <h6 data-v-ca798c94>标签</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/docs/java/java8.html" class="nav-link"><i class="iconfont undefined"></i>
  JAVA
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/frame/spring5.html" class="nav-link"><i class="iconfont undefined"></i>
  框架
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/source/springSource.html" class="nav-link"><i class="iconfont undefined"></i>
  源码
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/middleware/mysql.html" class="nav-link"><i class="iconfont undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/blogs/docs/tool/git.html" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时光走过了哪里
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      我在哪里
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/heartape" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/heartape" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/247318527" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  Bilibili
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="mailto:heartape@163.com" class="nav-link external"><i class="iconfont reco-mail"></i>
  163
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blogs/docs/tool/git.html" class="sidebar-link">git基础命令</a></li><li><a href="/blogs/docs/tool/docker.html" aria-current="page" class="active sidebar-link">docker基础</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>docker基础</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Heartape</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>docker基础</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>Heartape</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2022-06-13</span></i> <!----> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>docker</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="_1-docker基本命令"><a href="#_1-docker基本命令" class="header-anchor">#</a> 1.docker基本命令</h2> <ul><li>卸载docker</li></ul> <blockquote><p>yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine</p></blockquote> <ul><li>配置镜像</li></ul> <blockquote><p>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</p></blockquote> <ul><li>安装</li></ul> <blockquote><p>yum install docker-ce docker-ce-cli containerd.io</p></blockquote> <ul><li>启动</li></ul> <blockquote><p>systemctl start docker</p></blockquote> <ul><li>关闭</li></ul> <blockquote><p>systemctl stop docker</p></blockquote> <ul><li>设置开机自启动</li></ul> <blockquote><p>systemctl enable docker</p></blockquote> <ul><li>查看docker状态</li></ul> <blockquote><p>docker -v</p></blockquote> <ul><li>配置镜像加速</li></ul> <div class="language-text line-numbers-mode"><pre class="language-text"><code>mkdir -p /etc/docker
tee /etc/docker/daemon.json &amp;lt;&amp;lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://chqac97z.mirror.aliyuncs.com&quot;]
}
EOF
systemctl daemon-reload
systemctl restart docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p>查看当前正在运行的容器
docker ps</p></li> <li><p>查看所有的容器
docker ps -a</p></li> <li><p>停止全部运行中的容器
docker stop $(docker ps -q)</p></li> <li><p>启动容器
docker start 容器ID或容器名</p></li> <li><p>重新启动容器
docker restart 容器ID或容器名</p></li> <li><p>删除docker中的容器
docker rm 容器id</p></li> <li><p>删除全部容器
docker rm $(docker ps -aq)</p></li> <li><p>查看当前有些什么images
docker images</p></li> <li><p>删除images，通过image的id来指定删除谁
docker rmi + (image id)</p></li> <li><p>监控docker状态
docker stats</p></li> <li><p>防火墙</p></li></ul> <div class="language-text line-numbers-mode"><pre class="language-text"><code>#查看开放的端口
firewall-cmd --list-ports
#开放3306端口
firewall-cmd --add-port=3306/tcp --permanent
#移除开放6379端口
firewall-cmd --permanent --remove-port=6379/tcp
#重启防火墙
systemctl restart firewalld.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_2-docker安装mysql"><a href="#_2-docker安装mysql" class="header-anchor">#</a> 2.docker安装mysql</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull mysql:5.7(或者8.0.25)

# --name指定容器名字 -v目录挂载 -p指定端口映射 -e设置mysql参数 -d后台运行
# linux中的/mydata/mysql/log对应容器中的/var/log/mysql
docker run -p 3306:3306 --name mysql \
-v /mydata/mysql/log:/var/log \
-v /mydata/mysql/data:/var/lib/mysql \
-v /mydata/mysql/files:/var/lib/mysql-files \
-v /mydata/mysql/conf:/etc/mysql \
-e MYSQL_ROOT_PASSWORD=root \
-d mysql:8.0.27

# 上面命令可能会无法启动容器
# 1.彻底卸载原先系统中与mysql相关的内容
# 2.清空挂载文件夹

# 查看运行中的容器
docker ps

# 配置文件
[client]
default-character-set=utf8
[mysql]
default-character-set=utf8
[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
init_connect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_unicode_ci
skip-character-set-client-handshake
skip-name-resolve

# 进入容器内部,查看有没有生成my.conf
docker exec -it mysql /bin/bash
cd /etc/mysql/
cat my.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="_3-docker安装redis"><a href="#_3-docker安装redis" class="header-anchor">#</a> 3.docker安装redis</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull redis
// 非完整的启动命令
docker run --name some-redis -d redis
// 在虚拟机中创建文件,如果直接挂载的话docker会以为挂载的是一个目录
mkdir -p /mydata/redis/conf
touch /mydata/redis/conf/redis.conf
// 完整的启动命令,-d:加载配置文件,--:redis配置
docker run -p 6379:6379 --name redis \
-v /mydata/redis/data:/data \
-v /mydata/redis/conf:/etc/redis/redis.conf \
-d redis:6.2.6 redis-server /etc/redis/redis.conf \
--bind 0.0.0.0 \
--timeout 1000 \
--tcp-keepalive 300 \
--databases 2 \
--save 3600 1 \
--stop-writes-on-bgsave-error yes \
--rdbcompression yes \
--rdbchecksum yes \
--dbfilename dump.rdb \
--rdb-del-sync-files no \
--repl-diskless-load disabled \
--appendonly yes \
--appendfilename &quot;appendonly.aof&quot; \
--appendfsync everysec \
--no-appendfsync-on-rewrite no \
--aof-use-rdb-preamble yes

# 进入redis客户端
docker exec -it redis redis-cli
# 设置redis容器在docker启动的时候启动
docker update redis --restart=always
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="_4-docker安装nginx"><a href="#_4-docker安装nginx" class="header-anchor">#</a> 4.docker安装nginx</h2> <h3 id="_1-创建nginx容器"><a href="#_1-创建nginx容器" class="header-anchor">#</a> 1.创建nginx容器</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>docker pull nginx:1.10
# 随便启动一个nginx实例，只是为了复制出配置文件，放到docker里作为镜像的统一配置
docker run -p 80:80 -p 443:443 --name nginx -d nginx:1.10

cd /mydata/
mkdir nginx
docker container cp nginx:/etc/nginx .
然后在外部 /mydata/nginx/ 有了一堆文件
mv /mydata/nginx/ /mydata/nginx/conf
# 停掉nginx
docker stop nginx
docker rm nginx
#文件夹改名
mv nginx conf
#创建新的nginx文件夹
mkdir nginx
#将conf移动到nginx里
mv conf/ nginx

# 创建新的nginx
docker run -p 80:80 -p 443:443 --name nginx \
-v /mydata/nginx/html:/usr/share/nginx/html \
-v /mydata/nginx/logs:/var/log/nginx \
-v /mydata/nginx/conf:/etc/nginx \
-d nginx:1.10

# 注意一下这个路径映射到了/usr/share/nginx/html，我们在nginx配置文件中是写/usr/share/nginx/html，不是写/mydata/nginx/html

# 自启动
docker update nginx --restart=always
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_2-时区配置"><a href="#_2-时区配置" class="header-anchor">#</a> 2. 时区配置</h3> <p>nginx日志输出时间时区不正确</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>1. 启动项(未验证)
-v /etc/localtime:/etc/localtime

2. 进入容器修改
# 进入容器
docker exec -it nginx bash
# 设置时区
TZ='Asia/Shanghai'; export
# 保存，否则不生效，重启会还原
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

3.docker-compose.yml(未验证)
environment: TZ='Asia/Shanghai'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_5-elasticsearch"><a href="#_5-elasticsearch" class="header-anchor">#</a> 5.ElasticSearch</h2> <h3 id="_1-安装elasticsearch"><a href="#_1-安装elasticsearch" class="header-anchor">#</a> 1.安装ElasticSearch</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull elasticsearch:7.4.2
docker pull kibana:7.4.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># 将docker里的目录挂载到linux的/mydata目录中
# 修改/mydata就可以改掉docker里的
mkdir -p /mydata/elasticsearch/config
mkdir -p /mydata/elasticsearch/data

# es可以被远程任何机器访问
echo &quot;http.host: 0.0.0.0&quot; &gt;/mydata/elasticsearch/config/elasticsearch.yml

# 递归更改权限，es需要访问
chmod -R 777 /mydata/elasticsearch/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># 9200是用户交互端口,发送rest api请求的端口; 9300是集群心跳端口通信端口
# -e指定是单阶段运行
# -e指定占用的内存大小，生产时可以设置32G
docker run --name elasticsearch -p 9200:9200 -p 9300:9300 \
-e &quot;discovery.type=single-node&quot; \
-e ES_JAVA_OPTS=&quot;-Xms128m -Xmx512m&quot; \
-v /mydata/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \
-v /mydata/elasticsearch/data:/usr/share/elasticsearch/data \
-v /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins \
-d elasticsearch:7.4.2

如果添加selinux规则，将要挂载的目录添加到白名单
chmod -R 777 /mydata/elasticsearch/data
chmod -R 777 /mydata/elasticsearch/config
chmod -R 777 /mydata/elasticsearch/plugins

# 设置开机启动elasticsearch
docker update elasticsearch --restart=always
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_2-ik分词器"><a href="#_2-ik分词器" class="header-anchor">#</a> 2.ik分词器</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>注意:最好plugins下新建一个ik文件夹,将压缩包在ik里面解压,如果全部解压到plugins里,可能无法识别
cd /mydata/elasticsearch/plugins/ik
wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.4.2/elasticsearch-analysis-ik-7.4.2.zip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>#检查
#进入容器内部
docker exec -it ceda /bin/bash
#查看是否存在ik文件夹
cd plugins/
#查看插件列表有没有ik
cd ../
cd bin/
elasticsearch-plugin list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>测试
POST _analyze
{
	&quot;analyzer&quot;: &quot;ik_smart&quot;,
	&quot;text&quot;:&quot;我是中国人&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>#创建自定义词
#创建目录
在nginx的html目录下床建es/fenci.txt
#修改ik分词器配置
cd mydata/elasticsearch/plugins/ik/config/
vi IKAnalyzer.cfg.xml
*********************************************************************
打开下面的注释.并且编辑自定义词文件的位置
&lt;!--用户可以在这里配置远程扩展字典 --&gt;
&lt;entry key=&quot;remote_ext_dict&quot;&gt;http://192.168.31.103/es/fenci.txt&lt;/entry&gt; 
*********************************************************************
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-安装kibana"><a href="#_3-安装kibana" class="header-anchor">#</a> 3.安装kibana</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --name kibana -e ELASTICSEARCH_HOSTS=http://192.168.31.103:9200 -p 5601:5601 -d kibana:7.4.2

# 设置开机启动kibana
docker update kibana  --restart=always
# kibana图形界面http://192.168.31.103:5601
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_6-reveal-md"><a href="#_6-reveal-md" class="header-anchor">#</a> 6.reveal-md</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>开启服务,同时开启文件监听动态更新(监听会导致卡顿)
docker run -p 1948:1948 -p 35729:35729 -v /mydata/reveal-md:/slides -d webpronl/reveal-md:5.3.2 /slides --watch
不开启监听依旧会更新文件
docker run -p 1948:1948 -v /mydata/reveal-md:/slides -d webpronl/reveal-md:5.3.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_7-nacos"><a href="#_7-nacos" class="header-anchor">#</a> 7.nacos</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>默认占用内存较高，服务器内存较小的话需要调整内存
docker run -e JVM_XMS=256m -e JVM_XMX=256m -e JVM_XMN=128m -e JVM_MS=64m --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server:v2.0.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_8-rabbitmq"><a href="#_8-rabbitmq" class="header-anchor">#</a> 8.rabbitmq</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d --name rabbitmq -p 5672:5672 -p 15672:15672 -v /mydata/rabbitmq:/var/lib/rabbitmq rabbitmq:3.9.14-management-alpine
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022/10/7 04:14:37</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:2;" data-v-248d85d6></canvas></div><!----><div class="RibbonAnimation"></div><div id="goTop" class="hide-cat" data-v-bf92849a></div><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:1;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.3772d366.js" defer></script><script src="/assets/js/3.a756679f.js" defer></script><script src="/assets/js/1.9aef9ca4.js" defer></script><script src="/assets/js/60.a04cb69a.js" defer></script>
  </body>
</html>
