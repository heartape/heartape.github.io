(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{551:function(s,a,t){"use strict";t.r(a);var e=t(0),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-分库分表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-分库分表"}},[s._v("#")]),s._v(" 1.分库分表")]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开sql输出日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.props.sql.show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.mode.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("Standalone")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.mode.repository.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("File")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.mode.overwrite")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.names")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("forum0,forum1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum0.jdbc-url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("jdbc:mysql://localhost:3306/heartape_0?serverTimezone=UTC&useSSL=false&useUnicode=true&characterEncoding=UTF-8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum0.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("com.zaxxer.hikari.HikariDataSource")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum0.driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("com.mysql.cj.jdbc.Driver")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum0.username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("root")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum0.password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("root")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum1.jdbc-url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("jdbc:mysql://localhost:3306/heartape_1?serverTimezone=UTC&useSSL=false&useUnicode=true&characterEncoding=UTF-8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum1.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("com.zaxxer.hikari.HikariDataSource")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum1.driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("com.mysql.cj.jdbc.Driver")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum1.username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("root")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.datasource.forum1.password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("root")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义需要绑定规则的表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.binding-tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("article")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公共表配置,即那些经常被引用的表,会广播到所有数据源,所有数据源内的同名表都会同时进行操作")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.broadcast-tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("label")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义逻辑表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#spring.shardingsphere.rules.sharding.tables.article.logic-table=article")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义逻辑表所对应的所有真实表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不分库也不分表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# spring.shardingsphere.rules.sharding.tables.article.actual-data-nodes=forum0.article")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只分库不分表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#spring.shardingsphere.rules.sharding.tables.article.actual-data-nodes=forum$->{0..1}.article")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只分表不分库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#spring.shardingsphere.rules.sharding.tables.article.actual-data-nodes=forum0.article$->{0..1}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分库又分表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.tables.article.actual-data-nodes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("forum$->{0..1}.article$->{0..3}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义分库字段和分库算法名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.tables.article.database-strategy.standard.sharding-column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("article_id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.tables.article.database-strategy.standard.sharding-algorithm-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("article-database")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分库算法，对主键取模算法分为多个库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.sharding-algorithms.article-database.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("INLINE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.sharding-algorithms.article-database.props.algorithm-expression")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("forum$->{article_id % 2}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义同一库分表的规则")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.tables.article.table-strategy.standard.sharding-column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("article_id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.tables.article.table-strategy.standard.sharding-algorithm-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("article-table")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分表算法，对article_id模2算法分为两个表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.sharding-algorithms.article-table.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("INLINE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.sharding-algorithms.article-table.props.algorithm-expression")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("article_$->{article_id % 4}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义分布式主键策略")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.tables.article.key-generate-strategy.column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("article_id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.tables.article.key-generate-strategy.key-generator-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("snowflake")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义主键策略的实现类型")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.sharding.key-generators.snowflake.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("SNOWFLAKE")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br")])]),a("h2",{attrs:{id:"_2-读写分离"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-读写分离"}},[s._v("#")]),s._v(" 2.读写分离")]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在从服务器上设置源配置(8.0.27)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql> CHANGE REPLICATION SOURCE TO")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ->     SOURCE_HOST='source_host_name',")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ->     SOURCE_USER='replication_user_name',")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ->     SOURCE_PASSWORD='replication_password',")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ->     SOURCE_LOG_FILE='recorded_log_file_name',")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ->     SOURCE_LOG_POS=recorded_log_position;")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动SLAVE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# START SLAVE;")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面选项通过mysql查询(8.0.27)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql> show master status;")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql> show slave status;")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# master_0,master_1,master_2是虚拟的数据源,不需要定义,且配置分库分表时以这些虚拟库名不以内部实际库来配置,如")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# spring.shardingsphere.rules.sharding.tables.article.actual-data-nodes=master_$->{0..2}.article$->{0..2}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 省略master_0_write，master_0_read_0,master_0_read_1等数据源的配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_0.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("Static")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_0.props.write-data-source-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("master_0_write")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_0.props.read-data-source-names")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("master_0_read_0,master_0_read_1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_1.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("Static")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_1.props.write-data-source-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("master_1_write")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_1.props.read-data-source-names")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("master_1_read_0,master_1_read_1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_2.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("Static")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_2.props.write-data-source-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("master_2_write")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_2.props.read-data-source-names")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("master_2_read_0,master_2_read_1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.data-sources.master_2.load-balancer-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("round_robin")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.readwrite-splitting.load-balancers.round_robin.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("ROUND_ROBIN")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("h2",{attrs:{id:"_3-数据脱敏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-数据脱敏"}},[s._v("#")]),s._v(" 3.数据脱敏")]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 省略article表的配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否使用加密列进行查询")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.encrypt.query-with-cipher-column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.encrypt.tables.article.query-with-cipher-column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密文列")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.encrypt.tables.article.columns.username.cipher-column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("username_en")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 明文列")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.encrypt.tables.article.columns.username.plain-column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("username_un")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.encrypt.tables.article.columns.username.encryptor-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("username_aes")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加密算法配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.encrypt.encryptors.username_aes.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("AES")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.shardingsphere.rules.encrypt.encryptors.username_aes.props.aes-key-value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("xxx")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"_4-其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-其他"}},[s._v("#")]),s._v(" 4.其他")]),s._v(" "),a("p",[s._v("sharding-jdbc还有其他功能但作者还没有尝试过，就不指点江山了，可以参考官网https://shardingsphere.apache.org/"),a("br"),s._v("\n但是官网文档写的配置并不是很好理解可以看看GitHub上的官方 https://github.com/apache/shardingsphere 上的例子，如果上不去的话可以看看我在国内同步的仓库 https://gitee.com/heartape/shardingsphere")])])}),[],!1,null,null,null);a.default=r.exports}}]);